/* =========================================================
  TRES LETRAS ‚Äî MVP WEB (Local / Hosting est√°tico)
  - Sin backend
  - Sin APIs externas
  - Validaci√≥n: orden + existencia (diccionario local)
========================================================= */

/** Letras disponibles (incluye √ë) */
const LETTERS = "ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ".split("");

/**
 * Diccionario local de ejemplo.
 * REEMPLAZA esto por tu JSON grande:
 *  - O pegando un array gigante aqu√≠
 *  - O cargando words_es.json con fetch (mismo hosting)
 */
const WORDS = [
  "aÃÅbaco",
  "abdomen",
  "abeja",
  "abierto",
  "abogado",
  "abono",
  "aborto",
  "abrazo",
  "abrir",
  "abuelo",
  "abuso",
  "acabar",
  "academia",
  "acceso",
  "accioÃÅn",
  "aceite",
  "acelga",
  "acento",
  "aceptar",
  "aÃÅcido",
  "aclarar",
  "acneÃÅ",
  "acoger",
  "acoso",
  "activo",
  "acto",
  "actriz",
  "actuar",
  "acudir",
  "acuerdo",
  "acusar",
  "adicto",
  "admitir",
  "adoptar",
  "adorno",
  "aduana",
  "adulto",
  "aeÃÅreo",
  "afectar",
  "aficioÃÅn",
  "afinar",
  "afirmar",
  "aÃÅgil",
  "agitar",
  "agoniÃÅa",
  "agosto",
  "agotar",
  "agregar",
  "agrio",
  "agua",
  "agudo",
  "aÃÅguila",
  "aguja",
  "ahogo",
  "ahorro",
  "aire",
  "aislar",
  "ajedrez",
  "ajeno",
  "ajuste",
  "alacraÃÅn",
  "alambre",
  "alarma",
  "alba",
  "aÃÅlbum",
  "alcalde",
  "aldea",
  "alegre",
  "alejar",
  "alerta",
  "aleta",
  "alfiler",
  "alga",
  "algodoÃÅn",
  "aliado",
  "aliento",
  "alivio",
  "alma",
  "almeja",
  "almiÃÅbar",
  "altar",
  "alteza",
  "altivo",
  "alto",
  "altura",
  "alumno",
  "alzar",
  "amable",
  "amante",
  "amapola",
  "amargo",
  "amasar",
  "aÃÅmbar",
  "aÃÅmbito",
  "ameno",
  "amigo",
  "amistad",
  "amor",
  "amparo",
  "amplio",
  "ancho",
  "anciano",
  "ancla",
  "andar",
  "andeÃÅn",
  "anemia",
  "aÃÅngulo",
  "anillo",
  "aÃÅnimo",
  "aniÃÅs",
  "anotar",
  "antena",
  "antiguo",
  "antojo",
  "anual",
  "anular",
  "anuncio",
  "anÃÉadir",
  "anÃÉejo",
  "anÃÉo",
  "apagar",
  "aparato",
  "apetito",
  "apio",
  "aplicar",
  "apodo",
  "aporte",
  "apoyo",
  "aprender",
  "aprobar",
  "apuesta",
  "apuro",
  "arado",
  "aranÃÉa",
  "arar",
  "aÃÅrbitro",
  "aÃÅrbol",
  "arbusto",
  "archivo",
  "arco",
  "arder",
  "ardilla",
  "arduo",
  "aÃÅrea",
  "aÃÅrido",
  "aries",
  "armoniÃÅa",
  "arneÃÅs",
  "aroma",
  "arpa",
  "arpoÃÅn",
  "arreglo",
  "arroz",
  "arruga",
  "arte",
  "artista",
  "asa",
  "asado",
  "asalto",
  "ascenso",
  "asegurar",
  "aseo",
  "asesor",
  "asiento",
  "asilo",
  "asistir",
  "asno",
  "asombro",
  "aÃÅspero",
  "astilla",
  "astro",
  "astuto",
  "asumir",
  "asunto",
  "atajo",
  "ataque",
  "atar",
  "atento",
  "ateo",
  "aÃÅtico",
  "atleta",
  "aÃÅtomo",
  "atraer",
  "atroz",
  "atuÃÅn",
  "audaz",
  "audio",
  "auge",
  "aula",
  "aumento",
  "ausente",
  "autor",
  "aval",
  "avance",
  "avaro",
  "ave",
  "avellana",
  "avena",
  "avestruz",
  "avioÃÅn",
  "aviso",
  "ayer",
  "ayuda",
  "ayuno",
  "azafraÃÅn",
  "azar",
  "azote",
  "azuÃÅcar",
  "azufre",
  "azul",
  "baba",
  "babor",
  "bache",
  "bahiÃÅa",
  "baile",
  "bajar",
  "balanza",
  "balcoÃÅn",
  "balde",
  "bambuÃÅ",
  "banco",
  "banda",
  "banÃÉo",
  "barba",
  "barco",
  "barniz",
  "barro",
  "baÃÅscula",
  "bastoÃÅn",
  "basura",
  "batalla",
  "bateriÃÅa",
  "batir",
  "batuta",
  "bauÃÅl",
  "bazar",
  "bebeÃÅ",
  "bebida",
  "bello",
  "besar",
  "beso",
  "bestia",
  "bicho",
  "bien",
  "bingo",
  "blanco",
  "bloque",
  "blusa",
  "boa",
  "bobina",
  "bobo",
  "boca",
  "bocina",
  "boda",
  "bodega",
  "boina",
  "bola",
  "bolero",
  "bolsa",
  "bomba",
  "bondad",
  "bonito",
  "bono",
  "bonsaÃÅi",
  "borde",
  "borrar",
  "bosque",
  "bote",
  "botiÃÅn",
  "boÃÅveda",
  "bozal",
  "bravo",
  "brazo",
  "brecha",
  "breve",
  "brillo",
  "brinco",
  "brisa",
  "broca",
  "broma",
  "bronce",
  "brote",
  "bruja",
  "brusco",
  "bruto",
  "buceo",
  "bucle",
  "bueno",
  "buey",
  "bufanda",
  "bufoÃÅn",
  "buÃÅho",
  "buitre",
  "bulto",
  "burbuja",
  "burla",
  "burro",
  "buscar",
  "butaca",
  "buzoÃÅn",
  "caballo",
  "cabeza",
  "cabina",
  "cabra",
  "cacao",
  "cadaÃÅver",
  "cadena",
  "caer",
  "cafeÃÅ",
  "caiÃÅda",
  "caimaÃÅn",
  "caja",
  "cajoÃÅn",
  "cal",
  "calamar",
  "calcio",
  "caldo",
  "calidad",
  "calle",
  "calma",
  "calor",
  "calvo",
  "cama",
  "cambio",
  "camello",
  "camino",
  "campo",
  "caÃÅncer",
  "candil",
  "canela",
  "canguro",
  "canica",
  "canto",
  "canÃÉa",
  "canÃÉoÃÅn",
  "caoba",
  "caos",
  "capaz",
  "capitaÃÅn",
  "capote",
  "captar",
  "capucha",
  "cara",
  "carboÃÅn",
  "caÃÅrcel",
  "careta",
  "carga",
  "carinÃÉo",
  "carne",
  "carpeta",
  "carro",
  "carta",
  "casa",
  "casco",
  "casero",
  "caspa",
  "castor",
  "catorce",
  "catre",
  "caudal",
  "causa",
  "cazo",
  "cebolla",
  "ceder",
  "cedro",
  "celda",
  "ceÃÅlebre",
  "celoso",
  "ceÃÅlula",
  "cemento",
  "ceniza",
  "centro",
  "cerca",
  "cerdo",
  "cereza",
  "cero",
  "cerrar",
  "certeza",
  "ceÃÅsped",
  "cetro",
  "chacal",
  "chaleco",
  "champuÃÅ",
  "chancla",
  "chapa",
  "charla",
  "chico",
  "chiste",
  "chivo",
  "choque",
  "choza",
  "chuleta",
  "chupar",
  "cicloÃÅn",
  "ciego",
  "cielo",
  "cien",
  "cierto",
  "cifra",
  "cigarro",
  "cima",
  "cinco",
  "cine",
  "cinta",
  "cipreÃÅs",
  "circo",
  "ciruela",
  "cisne",
  "cita",
  "ciudad",
  "clamor",
  "clan",
  "claro",
  "clase",
  "clave",
  "cliente",
  "clima",
  "cliÃÅnica",
  "cobre",
  "coccioÃÅn",
  "cochino",
  "cocina",
  "coco",
  "coÃÅdigo",
  "codo",
  "cofre",
  "coger",
  "cohete",
  "cojiÃÅn",
  "cojo",
  "cola",
  "colcha",
  "colegio",
  "colgar",
  "colina",
  "collar",
  "colmo",
  "columna",
  "combate",
  "comer",
  "comida",
  "coÃÅmodo",
  "compra",
  "conde",
  "conejo",
  "conga",
  "conocer",
  "consejo",
  "contar",
  "copa",
  "copia",
  "corazoÃÅn",
  "corbata",
  "corcho",
  "cordoÃÅn",
  "corona",
  "correr",
  "coser",
  "cosmos",
  "costa",
  "craÃÅneo",
  "craÃÅter",
  "crear",
  "crecer",
  "creiÃÅdo",
  "crema",
  "criÃÅa",
  "crimen",
  "cripta",
  "crisis",
  "cromo",
  "croÃÅnica",
  "croqueta",
  "crudo",
  "cruz",
  "cuadro",
  "cuarto",
  "cuatro",
  "cubo",
  "cubrir",
  "cuchara",
  "cuello",
  "cuento",
  "cuerda",
  "cuesta",
  "cueva",
  "cuidar",
  "culebra",
  "culpa",
  "culto",
  "cumbre",
  "cumplir",
  "cuna",
  "cuneta",
  "cuota",
  "cupoÃÅn",
  "cuÃÅpula",
  "curar",
  "curioso",
  "curso",
  "curva",
  "cutis",
  "dama",
  "danza",
  "dar",
  "dardo",
  "daÃÅtil",
  "deber",
  "deÃÅbil",
  "deÃÅcada",
  "decir",
  "dedo",
  "defensa",
  "definir",
  "dejar",
  "delfiÃÅn",
  "delgado",
  "delito",
  "demora",
  "denso",
  "dental",
  "deporte",
  "derecho",
  "derrota",
  "desayuno",
  "deseo",
  "desfile",
  "desnudo",
  "destino",
  "desviÃÅo",
  "detalle",
  "detener",
  "deuda",
  "diÃÅa",
  "diablo",
  "diadema",
  "diamante",
  "diana",
  "diario",
  "dibujo",
  "dictar",
  "diente",
  "dieta",
  "diez",
  "difiÃÅcil",
  "digno",
  "dilema",
  "diluir",
  "dinero",
  "directo",
  "dirigir",
  "disco",
  "disenÃÉo",
  "disfraz",
  "diva",
  "divino",
  "doble",
  "doce",
  "dolor",
  "domingo",
  "don",
  "donar",
  "dorado",
  "dormir",
  "dorso",
  "dos",
  "dosis",
  "dragoÃÅn",
  "droga",
  "ducha",
  "duda",
  "duelo",
  "duenÃÉo",
  "dulce",
  "duÃÅo",
  "duque",
  "durar",
  "dureza",
  "duro",
  "eÃÅbano",
  "ebrio",
  "echar",
  "eco",
  "ecuador",
  "edad",
  "edicioÃÅn",
  "edificio",
  "editor",
  "educar",
  "efecto",
  "eficaz",
  "eje",
  "ejemplo",
  "elefante",
  "elegir",
  "elemento",
  "elevar",
  "elipse",
  "eÃÅlite",
  "elixir",
  "elogio",
  "eludir",
  "embudo",
  "emitir",
  "emocioÃÅn",
  "empate",
  "empenÃÉo",
  "empleo",
  "empresa",
  "enano",
  "encargo",
  "enchufe",
  "enciÃÅa",
  "enemigo",
  "enero",
  "enfado",
  "enfermo",
  "enganÃÉo",
  "enigma",
  "enlace",
  "enorme",
  "enredo",
  "ensayo",
  "ensenÃÉar",
  "entero",
  "entrar",
  "envase",
  "enviÃÅo",
  "eÃÅpoca",
  "equipo",
  "erizo",
  "escala",
  "escena",
  "escolar",
  "escribir",
  "escudo",
  "esencia",
  "esfera",
  "esfuerzo",
  "espada",
  "espejo",
  "espiÃÅa",
  "esposa",
  "espuma",
  "esquiÃÅ",
  "estar",
  "este",
  "estilo",
  "estufa",
  "etapa",
  "eterno",
  "eÃÅtica",
  "etnia",
  "evadir",
  "evaluar",
  "evento",
  "evitar",
  "exacto",
  "examen",
  "exceso",
  "excusa",
  "exento",
  "exigir",
  "exilio",
  "existir",
  "eÃÅxito",
  "experto",
  "explicar",
  "exponer",
  "extremo",
  "faÃÅbrica",
  "faÃÅbula",
  "fachada",
  "faÃÅcil",
  "factor",
  "faena",
  "faja",
  "falda",
  "fallo",
  "falso",
  "faltar",
  "fama",
  "familia",
  "famoso",
  "faraoÃÅn",
  "farmacia",
  "farol",
  "farsa",
  "fase",
  "fatiga",
  "fauna",
  "favor",
  "fax",
  "febrero",
  "fecha",
  "feliz",
  "feo",
  "feria",
  "feroz",
  "feÃÅrtil",
  "fervor",
  "festiÃÅn",
  "fiable",
  "fianza",
  "fiar",
  "fibra",
  "ficcioÃÅn",
  "ficha",
  "fideo",
  "fiebre",
  "fiel",
  "fiera",
  "fiesta",
  "figura",
  "fijar",
  "fijo",
  "fila",
  "filete",
  "filial",
  "filtro",
  "fin",
  "finca",
  "fingir",
  "finito",
  "firma",
  "flaco",
  "flauta",
  "flecha",
  "flor",
  "flota",
  "fluir",
  "flujo",
  "fluÃÅor",
  "fobia",
  "foca",
  "fogata",
  "fogoÃÅn",
  "folio",
  "folleto",
  "fondo",
  "forma",
  "forro",
  "fortuna",
  "forzar",
  "fosa",
  "foto",
  "fracaso",
  "fraÃÅgil",
  "franja",
  "frase",
  "fraude",
  "freiÃÅr",
  "freno",
  "fresa",
  "friÃÅo",
  "frito",
  "fruta",
  "fuego",
  "fuente",
  "fuerza",
  "fuga",
  "fumar",
  "funcioÃÅn",
  "funda",
  "furgoÃÅn",
  "furia",
  "fusil",
  "fuÃÅtbol",
  "futuro",
  "gacela",
  "gafas",
  "gaita",
  "gajo",
  "gala",
  "galeriÃÅa",
  "gallo",
  "gamba",
  "ganar",
  "gancho",
  "ganga",
  "ganso",
  "garaje",
  "garza",
  "gasolina",
  "gastar",
  "gato",
  "gavilaÃÅn",
  "gemelo",
  "gemir",
  "gen",
  "geÃÅnero",
  "genio",
  "gente",
  "geranio",
  "gerente",
  "germen",
  "gesto",
  "gigante",
  "gimnasio",
  "girar",
  "giro",
  "glaciar",
  "globo",
  "gloria",
  "gol",
  "golfo",
  "goloso",
  "golpe",
  "goma",
  "gordo",
  "gorila",
  "gorra",
  "gota",
  "goteo",
  "gozar",
  "grada",
  "graÃÅfico",
  "grano",
  "grasa",
  "gratis",
  "grave",
  "grieta",
  "grillo",
  "gripe",
  "gris",
  "grito",
  "grosor",
  "gruÃÅa",
  "grueso",
  "grumo",
  "grupo",
  "guante",
  "guapo",
  "guardia",
  "guerra",
  "guiÃÅa",
  "guinÃÉo",
  "guion",
  "guiso",
  "guitarra",
  "gusano",
  "gustar",
  "haber",
  "haÃÅbil",
  "hablar",
  "hacer",
  "hacha",
  "hada",
  "hallar",
  "hamaca",
  "harina",
  "haz",
  "hazanÃÉa",
  "hebilla",
  "hebra",
  "hecho",
  "helado",
  "helio",
  "hembra",
  "herir",
  "hermano",
  "heÃÅroe",
  "hervir",
  "hielo",
  "hierro",
  "hiÃÅgado",
  "higiene",
  "hijo",
  "himno",
  "historia",
  "hocico",
  "hogar",
  "hoguera",
  "hoja",
  "hombre",
  "hongo",
  "honor",
  "honra",
  "hora",
  "hormiga",
  "horno",
  "hostil",
  "hoyo",
  "hueco",
  "huelga",
  "huerta",
  "hueso",
  "huevo",
  "huida",
  "huir",
  "humano",
  "huÃÅmedo",
  "humilde",
  "humo",
  "hundir",
  "huracaÃÅn",
  "hurto",
  "icono",
  "ideal",
  "idioma",
  "iÃÅdolo",
  "iglesia",
  "igluÃÅ",
  "igual",
  "ilegal",
  "ilusioÃÅn",
  "imagen",
  "imaÃÅn",
  "imitar",
  "impar",
  "imperio",
  "imponer",
  "impulso",
  "incapaz",
  "iÃÅndice",
  "inerte",
  "infiel",
  "informe",
  "ingenio",
  "inicio",
  "inmenso",
  "inmune",
  "innato",
  "insecto",
  "instante",
  "intereÃÅs",
  "iÃÅntimo",
  "intuir",
  "inuÃÅtil",
  "invierno",
  "ira",
  "iris",
  "ironiÃÅa",
  "isla",
  "islote",
  "jabaliÃÅ",
  "jaboÃÅn",
  "jamoÃÅn",
  "jarabe",
  "jardiÃÅn",
  "jarra",
  "jaula",
  "jazmiÃÅn",
  "jefe",
  "jeringa",
  "jinete",
  "jornada",
  "joroba",
  "joven",
  "joya",
  "juerga",
  "jueves",
  "juez",
  "jugador",
  "jugo",
  "juguete",
  "juicio",
  "junco",
  "jungla",
  "junio",
  "juntar",
  "juÃÅpiter",
  "jurar",
  "justo",
  "juvenil",
  "juzgar",
  "kilo",
  "koala",
  "labio",
  "lacio",
  "lacra",
  "lado",
  "ladroÃÅn",
  "lagarto",
  "laÃÅgrima",
  "laguna",
  "laico",
  "lamer",
  "laÃÅmina",
  "laÃÅmpara",
  "lana",
  "lancha",
  "langosta",
  "lanza",
  "laÃÅpiz",
  "largo",
  "larva",
  "laÃÅstima",
  "lata",
  "laÃÅtex",
  "latir",
  "laurel",
  "lavar",
  "lazo",
  "leal",
  "leccioÃÅn",
  "leche",
  "lector",
  "leer",
  "legioÃÅn",
  "legumbre",
  "lejano",
  "lengua",
  "lento",
  "lenÃÉa",
  "leoÃÅn",
  "leopardo",
  "lesioÃÅn",
  "letal",
  "letra",
  "leve",
  "leyenda",
  "libertad",
  "libro",
  "licor",
  "liÃÅder",
  "lidiar",
  "lienzo",
  "liga",
  "ligero",
  "lima",
  "liÃÅmite",
  "limoÃÅn",
  "limpio",
  "lince",
  "lindo",
  "liÃÅnea",
  "lingote",
  "lino",
  "linterna",
  "liÃÅquido",
  "liso",
  "lista",
  "litera",
  "litio",
  "litro",
  "llaga",
  "llama",
  "llanto",
  "llave",
  "llegar",
  "llenar",
  "llevar",
  "llorar",
  "llover",
  "lluvia",
  "lobo",
  "locioÃÅn",
  "loco",
  "locura",
  "loÃÅgica",
  "logro",
  "lombriz",
  "lomo",
  "lonja",
  "lote",
  "lucha",
  "lucir",
  "lugar",
  "lujo",
  "luna",
  "lunes",
  "lupa",
  "lustro",
  "luto",
  "luz",
  "maceta",
  "macho",
  "madera",
  "madre",
  "maduro",
  "maestro",
  "mafia",
  "magia",
  "mago",
  "maiÃÅz",
  "maldad",
  "maleta",
  "malla",
  "malo",
  "mamaÃÅ",
  "mambo",
  "mamut",
  "manco",
  "mando",
  "manejar",
  "manga",
  "maniquiÃÅ",
  "manjar",
  "mano",
  "manso",
  "manta",
  "manÃÉana",
  "mapa",
  "maÃÅquina",
  "mar",
  "marco",
  "marea",
  "marfil",
  "margen",
  "marido",
  "maÃÅrmol",
  "marroÃÅn",
  "martes",
  "marzo",
  "masa",
  "maÃÅscara",
  "masivo",
  "matar",
  "materia",
  "matiz",
  "matriz",
  "maÃÅximo",
  "mayor",
  "mazorca",
  "mecha",
  "medalla",
  "medio",
  "meÃÅdula",
  "mejilla",
  "mejor",
  "melena",
  "meloÃÅn",
  "memoria",
  "menor",
  "mensaje",
  "mente",
  "menuÃÅ",
  "mercado",
  "merengue",
  "meÃÅrito",
  "mes",
  "mesoÃÅn",
  "meta",
  "meter",
  "meÃÅtodo",
  "metro",
  "mezcla",
  "miedo",
  "miel",
  "miembro",
  "miga",
  "mil",
  "milagro",
  "militar",
  "milloÃÅn",
  "mimo",
  "mina",
  "minero",
  "miÃÅnimo",
  "minuto",
  "miope",
  "mirar",
  "misa",
  "miseria",
  "misil",
  "mismo",
  "mitad",
  "mito",
  "mochila",
  "mocioÃÅn",
  "moda",
  "modelo",
  "moho",
  "mojar",
  "molde",
  "moler",
  "molino",
  "momento",
  "momia",
  "monarca",
  "moneda",
  "monja",
  "monto",
  "monÃÉo",
  "morada",
  "morder",
  "moreno",
  "morir",
  "morro",
  "morsa",
  "mortal",
  "mosca",
  "mostrar",
  "motivo",
  "mover",
  "moÃÅvil",
  "mozo",
  "mucho",
  "mudar",
  "mueble",
  "muela",
  "muerte",
  "muestra",
  "mugre",
  "mujer",
  "mula",
  "muleta",
  "multa",
  "mundo",
  "munÃÉeca",
  "mural",
  "muro",
  "muÃÅsculo",
  "museo",
  "musgo",
  "muÃÅsica",
  "muslo",
  "naÃÅcar",
  "nacioÃÅn",
  "nadar",
  "naipe",
  "naranja",
  "nariz",
  "narrar",
  "nasal",
  "natal",
  "nativo",
  "natural",
  "naÃÅusea",
  "naval",
  "nave",
  "navidad",
  "necio",
  "neÃÅctar",
  "negar",
  "negocio",
  "negro",
  "neoÃÅn",
  "nervio",
  "neto",
  "neutro",
  "nevar",
  "nevera",
  "nicho",
  "nido",
  "niebla",
  "nieto",
  "ninÃÉez",
  "ninÃÉo",
  "niÃÅtido",
  "nivel",
  "nobleza",
  "noche",
  "noÃÅmina",
  "noria",
  "norma",
  "norte",
  "nota",
  "noticia",
  "novato",
  "novela",
  "novio",
  "nube",
  "nuca",
  "nuÃÅcleo",
  "nudillo",
  "nudo",
  "nuera",
  "nueve",
  "nuez",
  "nulo",
  "nuÃÅmero",
  "nutria",
  "oasis",
  "obeso",
  "obispo",
  "objeto",
  "obra",
  "obrero",
  "observar",
  "obtener",
  "obvio",
  "oca",
  "ocaso",
  "oceÃÅano",
  "ochenta",
  "ocho",
  "ocio",
  "ocre",
  "octavo",
  "octubre",
  "oculto",
  "ocupar",
  "ocurrir",
  "odiar",
  "odio",
  "odisea",
  "oeste",
  "ofensa",
  "oferta",
  "oficio",
  "ofrecer",
  "ogro",
  "oiÃÅdo",
  "oiÃÅr",
  "ojo",
  "ola",
  "oleada",
  "olfato",
  "olivo",
  "olla",
  "olmo",
  "olor",
  "olvido",
  "ombligo",
  "onda",
  "onza",
  "opaco",
  "opcioÃÅn",
  "oÃÅpera",
  "opinar",
  "oponer",
  "optar",
  "oÃÅptica",
  "opuesto",
  "oracioÃÅn",
  "orador",
  "oral",
  "oÃÅrbita",
  "orca",
  "orden",
  "oreja",
  "oÃÅrgano",
  "orgiÃÅa",
  "orgullo",
  "oriente",
  "origen",
  "orilla",
  "oro",
  "orquesta",
  "oruga",
  "osadiÃÅa",
  "oscuro",
  "osezno",
  "oso",
  "ostra",
  "otonÃÉo",
  "otro",
  "oveja",
  "oÃÅvulo",
  "oÃÅxido",
  "oxiÃÅgeno",
  "oyente",
  "ozono",
  "pacto",
  "padre",
  "paella",
  "paÃÅgina",
  "pago",
  "paiÃÅs",
  "paÃÅjaro",
  "palabra",
  "palco",
  "paleta",
  "paÃÅlido",
  "palma",
  "paloma",
  "palpar",
  "pan",
  "panal",
  "paÃÅnico",
  "pantera",
  "panÃÉuelo",
  "papaÃÅ",
  "papel",
  "papilla",
  "paquete",
  "parar",
  "parcela",
  "pared",
  "parir",
  "paro",
  "paÃÅrpado",
  "parque",
  "paÃÅrrafo",
  "parte",
  "pasar",
  "paseo",
  "pasioÃÅn",
  "paso",
  "pasta",
  "pata",
  "patio",
  "patria",
  "pausa",
  "pauta",
  "pavo",
  "payaso",
  "peatoÃÅn",
  "pecado",
  "pecera",
  "pecho",
  "pedal",
  "pedir",
  "pegar",
  "peine",
  "pelar",
  "peldanÃÉo",
  "pelea",
  "peligro",
  "pellejo",
  "pelo",
  "peluca",
  "pena",
  "pensar",
  "penÃÉoÃÅn",
  "peoÃÅn",
  "peor",
  "pepino",
  "pequenÃÉo",
  "pera",
  "percha",
  "perder",
  "pereza",
  "perfil",
  "perico",
  "perla",
  "permiso",
  "perro",
  "persona",
  "pesa",
  "pesca",
  "peÃÅsimo",
  "pestanÃÉa",
  "peÃÅtalo",
  "petroÃÅleo",
  "pez",
  "pezunÃÉa",
  "picar",
  "pichoÃÅn",
  "pie",
  "piedra",
  "pierna",
  "pieza",
  "pijama",
  "pilar",
  "piloto",
  "pimienta",
  "pino",
  "pintor",
  "pinza",
  "pinÃÉa",
  "piojo",
  "pipa",
  "pirata",
  "pisar",
  "piscina",
  "piso",
  "pista",
  "pitoÃÅn",
  "pizca",
  "placa",
  "plan",
  "plata",
  "playa",
  "plaza",
  "pleito",
  "pleno",
  "plomo",
  "pluma",
  "plural",
  "pobre",
  "poco",
  "poder",
  "podio",
  "poema",
  "poesiÃÅa",
  "poeta",
  "polen",
  "policiÃÅa",
  "pollo",
  "polvo",
  "pomada",
  "pomelo",
  "pomo",
  "pompa",
  "poner",
  "porcioÃÅn",
  "portal",
  "posada",
  "poseer",
  "posible",
  "poste",
  "potencia",
  "potro",
  "pozo",
  "prado",
  "precoz",
  "pregunta",
  "premio",
  "prensa",
  "preso",
  "previo",
  "primo",
  "priÃÅncipe",
  "prisioÃÅn",
  "privar",
  "proa",
  "probar",
  "proceso",
  "producto",
  "proeza",
  "profesor",
  "programa",
  "prole",
  "promesa",
  "pronto",
  "propio",
  "proÃÅximo",
  "prueba",
  "puÃÅblico",
  "puchero",
  "pudor",
  "pueblo",
  "puerta",
  "puesto",
  "pulga",
  "pulir",
  "pulmoÃÅn",
  "pulpo",
  "pulso",
  "puma",
  "punto",
  "punÃÉal",
  "punÃÉo",
  "pupa",
  "pupila",
  "pureÃÅ",
  "quedar",
  "queja",
  "quemar",
  "querer",
  "queso",
  "quieto",
  "quiÃÅmica",
  "quince",
  "quitar",
  "raÃÅbano",
  "rabia",
  "rabo",
  "racioÃÅn",
  "radical",
  "raiÃÅz",
  "rama",
  "rampa",
  "rancho",
  "rango",
  "rapaz",
  "raÃÅpido",
  "rapto",
  "rasgo",
  "raspa",
  "rato",
  "rayo",
  "raza",
  "razoÃÅn",
  "reaccioÃÅn",
  "realidad",
  "rebanÃÉo",
  "rebote",
  "recaer",
  "receta",
  "rechazo",
  "recoger",
  "recreo",
  "recto",
  "recurso",
  "red",
  "redondo",
  "reducir",
  "reflejo",
  "reforma",
  "refraÃÅn",
  "refugio",
  "regalo",
  "regir",
  "regla",
  "regreso",
  "reheÃÅn",
  "reino",
  "reiÃÅr",
  "reja",
  "relato",
  "relevo",
  "relieve",
  "relleno",
  "reloj",
  "remar",
  "remedio",
  "remo",
  "rencor",
  "rendir",
  "renta",
  "reparto",
  "repetir",
  "reposo",
  "reptil",
  "res",
  "rescate",
  "resina",
  "respeto",
  "resto",
  "resumen",
  "retiro",
  "retorno",
  "retrato",
  "reunir",
  "reveÃÅs",
  "revista",
  "rey",
  "rezar",
  "rico",
  "riego",
  "rienda",
  "riesgo",
  "rifa",
  "riÃÅgido",
  "rigor",
  "rincoÃÅn",
  "rinÃÉoÃÅn",
  "riÃÅo",
  "riqueza",
  "risa",
  "ritmo",
  "rito",
  "rizo",
  "roble",
  "roce",
  "rociar",
  "rodar",
  "rodeo",
  "rodilla",
  "roer",
  "rojizo",
  "rojo",
  "romero",
  "romper",
  "ron",
  "ronco",
  "ronda",
  "ropa",
  "ropero",
  "rosa",
  "rosca",
  "rostro",
  "rotar",
  "rubiÃÅ",
  "rubor",
  "rudo",
  "rueda",
  "rugir",
  "ruido",
  "ruina",
  "ruleta",
  "rulo",
  "rumbo",
  "rumor",
  "ruptura",
  "ruta",
  "rutina",
  "saÃÅbado",
  "saber",
  "sabio",
  "sable",
  "sacar",
  "sagaz",
  "sagrado",
  "sala",
  "saldo",
  "salero",
  "salir",
  "salmoÃÅn",
  "saloÃÅn",
  "salsa",
  "salto",
  "salud",
  "salvar",
  "samba",
  "sancioÃÅn",
  "sandiÃÅa",
  "sanear",
  "sangre",
  "sanidad",
  "sano",
  "santo",
  "sapo",
  "saque",
  "sardina",
  "sarteÃÅn",
  "sastre",
  "sataÃÅn",
  "sauna",
  "saxofoÃÅn",
  "seccioÃÅn",
  "seco",
  "secreto",
  "secta",
  "sed",
  "seguir",
  "seis",
  "sello",
  "selva",
  "semana",
  "semilla",
  "senda",
  "sensor",
  "senÃÉal",
  "senÃÉor",
  "separar",
  "sepia",
  "sequiÃÅa",
  "ser",
  "serie",
  "sermoÃÅn",
  "servir",
  "sesenta",
  "sesioÃÅn",
  "seta",
  "setenta",
  "severo",
  "sexo",
  "sexto",
  "sidra",
  "siesta",
  "siete",
  "siglo",
  "signo",
  "siÃÅlaba",
  "silbar",
  "silencio",
  "silla",
  "siÃÅmbolo",
  "simio",
  "sirena",
  "sistema",
  "sitio",
  "situar",
  "sobre",
  "socio",
  "sodio",
  "sol",
  "solapa",
  "soldado",
  "soledad",
  "soÃÅlido",
  "soltar",
  "solucioÃÅn",
  "sombra",
  "sondeo",
  "sonido",
  "sonoro",
  "sonrisa",
  "sopa",
  "soplar",
  "soporte",
  "sordo",
  "sorpresa",
  "sorteo",
  "sosteÃÅn",
  "soÃÅtano",
  "suave",
  "subir",
  "suceso",
  "sudor",
  "suegra",
  "suelo",
  "suenÃÉo",
  "suerte",
  "sufrir",
  "sujeto",
  "sultaÃÅn",
  "sumar",
  "superar",
  "suplir",
  "suponer",
  "supremo",
  "sur",
  "surco",
  "surenÃÉo",
  "surgir",
  "susto",
  "sutil",
  "tabaco",
  "tabique",
  "tabla",
  "tabuÃÅ",
  "taco",
  "tacto",
  "tajo",
  "talar",
  "talco",
  "talento",
  "talla",
  "taloÃÅn",
  "tamanÃÉo",
  "tambor",
  "tango",
  "tanque",
  "tapa",
  "tapete",
  "tapia",
  "tapoÃÅn",
  "taquilla",
  "tarde",
  "tarea",
  "tarifa",
  "tarjeta",
  "tarot",
  "tarro",
  "tarta",
  "tatuaje",
  "tauro",
  "taza",
  "tazoÃÅn",
  "teatro",
  "techo",
  "tecla",
  "teÃÅcnica",
  "tejado",
  "tejer",
  "tejido",
  "tela",
  "teleÃÅfono",
  "tema",
  "temor",
  "templo",
  "tenaz",
  "tender",
  "tener",
  "tenis",
  "tenso",
  "teoriÃÅa",
  "terapia",
  "terco",
  "teÃÅrmino",
  "ternura",
  "terror",
  "tesis",
  "tesoro",
  "testigo",
  "tetera",
  "texto",
  "tez",
  "tibio",
  "tiburoÃÅn",
  "tiempo",
  "tienda",
  "tierra",
  "tieso",
  "tigre",
  "tijera",
  "tilde",
  "timbre",
  "tiÃÅmido",
  "timo",
  "tinta",
  "tiÃÅo",
  "tiÃÅpico",
  "tipo",
  "tira",
  "tiroÃÅn",
  "titaÃÅn",
  "tiÃÅtere",
  "tiÃÅtulo",
  "tiza",
  "toalla",
  "tobillo",
  "tocar",
  "tocino",
  "todo",
  "toga",
  "toldo",
  "tomar",
  "tono",
  "tonto",
  "topar",
  "tope",
  "toque",
  "toÃÅrax",
  "torero",
  "tormenta",
  "torneo",
  "toro",
  "torpedo",
  "torre",
  "torso",
  "tortuga",
  "tos",
  "tosco",
  "toser",
  "toÃÅxico",
  "trabajo",
  "tractor",
  "traer",
  "traÃÅfico",
  "trago",
  "traje",
  "tramo",
  "trance",
  "trato",
  "trauma",
  "trazar",
  "treÃÅbol",
  "tregua",
  "treinta",
  "tren",
  "trepar",
  "tres",
  "tribu",
  "trigo",
  "tripa",
  "triste",
  "triunfo",
  "trofeo",
  "trompa",
  "tronco",
  "tropa",
  "trote",
  "trozo",
  "truco",
  "trueno",
  "trufa",
  "tuberiÃÅa",
  "tubo",
  "tuerto",
  "tumba",
  "tumor",
  "tuÃÅnel",
  "tuÃÅnica",
  "turbina",
  "turismo",
  "turno",
  "tutor",
  "ubicar",
  "uÃÅlcera",
  "umbral",
  "unidad",
  "unir",
  "universo",
  "uno",
  "untar",
  "unÃÉa",
  "urbano",
  "urbe",
  "urgente",
  "urna",
  "usar",
  "usuario",
  "uÃÅtil",
  "utopiÃÅa",
  "uva",
  "vaca",
  "vaciÃÅo",
  "vacuna",
  "vagar",
  "vago",
  "vaina",
  "vajilla",
  "vale",
  "vaÃÅlido",
  "valle",
  "valor",
  "vaÃÅlvula",
  "vampiro",
  "vara",
  "variar",
  "varoÃÅn",
  "vaso",
  "vecino",
  "vector",
  "vehiÃÅculo",
  "veinte",
  "vejez",
  "vela",
  "velero",
  "veloz",
  "vena",
  "vencer",
  "venda",
  "veneno",
  "vengar",
  "venir",
  "venta",
  "venus",
  "ver",
  "verano",
  "verbo",
  "verde",
  "vereda",
  "verja",
  "verso",
  "verter",
  "viÃÅa",
  "viaje",
  "vibrar",
  "vicio",
  "viÃÅctima",
  "vida",
  "viÃÅdeo",
  "vidrio",
  "viejo",
  "viernes",
  "vigor",
  "vil",
  "villa",
  "vinagre",
  "vino",
  "vinÃÉedo",
  "violiÃÅn",
  "viral",
  "virgo",
  "virtud",
  "visor",
  "viÃÅspera",
  "vista",
  "vitamina",
  "viudo",
  "vivaz",
  "vivero",
  "vivir",
  "vivo",
  "volcaÃÅn",
  "volumen",
  "volver",
  "voraz",
  "votar",
  "voto",
  "voz",
  "vuelo",
  "vulgar",
  "yacer",
  "yate",
  "yegua",
  "yema",
  "yerno",
  "yeso",
  "yodo",
  "yoga",
  "yogur",
  "zafiro",
  "zanja",
  "zapato",
  "zarza",
  "zona",
  "zorro",
  "zumo",
  "zurdo"
]

// Convertimos a Set para b√∫squeda r√°pida
const DICT = new Set(WORDS.map(w => normalizeWord(w)));

// UI refs
const slot1 = document.getElementById("slot1");
const slot2 = document.getElementById("slot2");
const slot3 = document.getElementById("slot3");
const timerEl = document.getElementById("timer");
const btnStart = document.getElementById("btnStart");
const btnRules = document.getElementById("btnRules");
const btnReset = document.getElementById("btnReset");
const btnSend = document.getElementById("btnSend");
const wordInput = document.getElementById("wordInput");
const message = document.getElementById("message");
const wordsList = document.getElementById("wordsList");

const chipLetters = document.getElementById("chipLetters");
const chipRound = document.getElementById("chipRound");
const chipWordScore = document.getElementById("chipWordScore");

const totalScoreEl = document.getElementById("totalScore");
const bestScoreEl = document.getElementById("bestScore");

// Modal
const rulesModal = document.getElementById("rulesModal");
const btnCloseRules = document.getElementById("btnCloseRules");
const btnOkRules = document.getElementById("btnOkRules");

// Game state
let baseLetters = ["-","-","-"];
let timeLeft = 30;
let timerId = null;
let spinning = false;

let totalScore = 0;
let bestScore = Number(localStorage.getItem("tresletras_best") || "0");
let roundCount = 0;

const usedWords = new Set();

bestScoreEl.textContent = String(bestScore);
totalScoreEl.textContent = String(totalScore);

openRules(); // mostrar reglas al inicio

// ===================== Helpers =====================
function pad2(n){ return String(n).padStart(2,"0"); }

function setMessage(text, type=""){
  message.className = "msg " + (type || "");
  message.textContent = text;
}

function normalizeWord(str){
  // 1) trim, uppercase
  // 2) quitar tildes (√°√©√≠√≥√∫√º) -> aeiouu, mantener √ë
  // 3) quitar caracteres no letras (pero NO aceptamos espacios/guiones como v√°lidos)
  const up = (str || "").trim().toUpperCase();

  // Normalizamos tildes sin romper √ë:
  // - Convertimos a NFD y quitamos diacr√≠ticos EXCEPTO la √ë.
  // Truco: temporalmente reemplazamos √ë por un marcador.
  const mark = up.replaceAll("√ë", "__ENIE__");
  const noDiacritics = mark
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "") // quita tildes
    .replaceAll("__ENIE__", "√ë");

  return noDiacritics;
}

function hasForbiddenSeparators(raw){
  // Prohibimos palabras compuestas: espacios o guiones
  return /[\s-]/.test(raw);
}

function containsInOrder(word, a, b, c){
  // word ya normalizada
  const i1 = word.indexOf(a);
  if(i1 === -1) return false;
  const i2 = word.indexOf(b, i1 + 1);
  if(i2 === -1) return false;
  const i3 = word.indexOf(c, i2 + 1);
  return i3 !== -1;
}

function letterPoints(ch){
  // √ë, W, X, Y, Z = 4; resto = 2
  if(["√ë","W","X","Y","Z"].includes(ch)) return 4;
  // A-Z est√°ndar = 2
  if(/^[A-Z√ë]$/.test(ch)) return 2;
  return 0;
}

function scoreWord(wordNorm){
  let sum = 0;
  let specials = 0;

  for(const ch of wordNorm){
    const pts = letterPoints(ch);
    sum += pts;
    if(["√ë","W","X","Y","Z"].includes(ch)) specials++;
  }

  // Bonos opcionales
  if(wordNorm.length >= 16) sum += 10;
  else if(wordNorm.length >= 14) sum += 5;

  if(specials >= 3) sum += 15;

  return sum;
}

function updateChips(lastWordScore=0){
  chipLetters.textContent = `Letras: ${baseLetters.join(" - ")}`;
  chipRound.textContent = `Ronda: ${roundCount}`;
  chipWordScore.textContent = `+${lastWordScore}`;
}

// ===================== Slot animation =====================
function setSlotChar(slotEl, ch){
  slotEl.querySelector(".slotChar").textContent = ch;
}

function randomLetter(){
  return LETTERS[Math.floor(Math.random()*LETTERS.length)];
}

async function spinSlots(durationMs=900){
  if(spinning) return;
  spinning = true;

  const start = Date.now();
  let a="-", b="-", c="-";

  // ‚ÄúEfecto tragamonedas‚Äù: cambia letras r√°pido
  while(Date.now() - start < durationMs){
    a = randomLetter();
    b = randomLetter();
    c = randomLetter();
    setSlotChar(slot1, a);
    setSlotChar(slot2, b);
    setSlotChar(slot3, c);
    await sleep(60);
  }

  // Resultado final
  baseLetters = [randomLetter(), randomLetter(), randomLetter()];
  setSlotChar(slot1, baseLetters[0]);
  setSlotChar(slot2, baseLetters[1]);
  setSlotChar(slot3, baseLetters[2]);

  spinning = false;
  updateChips(0);
}

function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

// ===================== Timer =====================
function renderTimer(){
  timerEl.textContent = `00:${pad2(timeLeft)}`;
}

function startTimer(){
  clearInterval(timerId);
  timerId = setInterval(() => {
    timeLeft--;
    renderTimer();

    if(timeLeft <= 0){
      endGame();
    }
  }, 1000);
}

function endGame(){
  clearInterval(timerId);
  timerId = null;

  wordInput.disabled = true;
  btnSend.disabled = true;
  btnStart.disabled = false;

  setMessage(`‚è±Ô∏è Tiempo terminado. Puntaje total: ${totalScore}`, "warn");

  if(totalScore > bestScore){
    bestScore = totalScore;
    localStorage.setItem("tresletras_best", String(bestScore));
    bestScoreEl.textContent = String(bestScore);
    setMessage(`üèÜ Nuevo mejor puntaje: ${bestScore}`, "ok");
  }
}

// ===================== Game flow =====================
function resetGame(){
  clearInterval(timerId);
  timerId = null;

  baseLetters = ["-","-","-"];
  setSlotChar(slot1, "-");
  setSlotChar(slot2, "-");
  setSlotChar(slot3, "-");

  timeLeft = 30;
  renderTimer();

  totalScore = 0;
  totalScoreEl.textContent = "0";
  roundCount = 0;

  usedWords.clear();
  wordsList.innerHTML = "";

  wordInput.value = "";
  wordInput.disabled = true;
  btnSend.disabled = true;

  btnStart.disabled = false;

  updateChips(0);
  setMessage("Listo. Presiona Empezar.", "");
}

async function startGame(){
  btnStart.disabled = true;
  setMessage("üé∞ Generando letras...", "");

  // nueva partida
  totalScore = 0;
  totalScoreEl.textContent = "0";
  roundCount = 1;
  usedWords.clear();
  wordsList.innerHTML = "";
  wordInput.value = "";
  updateChips(0);

  timeLeft = 30;
  renderTimer();

  await spinSlots(1000);

  // habilitar juego
  wordInput.disabled = false;
  btnSend.disabled = false;
  wordInput.focus();

  setMessage("‚úÖ ¬°Ya! Escribe palabras y presiona Enviar.", "ok");
  startTimer();
}

function addWordToList(wordRaw, pts){
  const li = document.createElement("li");
  li.textContent = `${wordRaw.toUpperCase()}  (+${pts})`;
  wordsList.prepend(li);
}

function validateAndScore(){
  const raw = wordInput.value.trim();
  if(!raw){
    setMessage("Escribe una palabra.", "bad");
    return;
  }

  if(hasForbiddenSeparators(raw)){
    setMessage("No se permiten palabras compuestas (sin espacios ni guiones).", "bad");
    return;
  }

  const norm = normalizeWord(raw);

  // Solo letras A-Z y √ë (despu√©s de normalizar)
  if(!/^[A-Z√ë]+$/.test(norm)){
    setMessage("Solo se permiten letras (A-Z y √ë).", "bad");
    return;
  }

  // Validaci√≥n de orden
  const [A,B,C] = baseLetters;
  if(!containsInOrder(norm, A, B, C)){
    setMessage(`Debe contener ${A}-${B}-${C} en ese orden.`, "bad");
    return;
  }

  // No repetir palabra en la misma partida
  if(usedWords.has(norm)){
    setMessage("Esa palabra ya la usaste en esta partida.", "warn");
    return;
  }

  // Validaci√≥n de existencia (diccionario local)
  if(!DICT.has(norm)){
    setMessage("No est√° en el diccionario local (MVP).", "bad");
    return;
  }

  // Puntaje
  const pts = scoreWord(norm);
  totalScore += pts;
  totalScoreEl.textContent = String(totalScore);

  usedWords.add(norm);
  addWordToList(raw, pts);

  updateChips(pts);
  setMessage(`‚úÖ V√°lida: +${pts} puntos`, "ok");

  wordInput.value = "";
  wordInput.focus();
}

// ===================== Modal Rules =====================
function openRules(){
  rulesModal.classList.add("show");
  rulesModal.setAttribute("aria-hidden", "false");
}
function closeRules(){
  rulesModal.classList.remove("show");
  rulesModal.setAttribute("aria-hidden", "true");
}

// ===================== Events =====================
btnStart.addEventListener("click", startGame);
btnReset.addEventListener("click", resetGame);

btnSend.addEventListener("click", () => {
  if(timerId) validateAndScore();
});

wordInput.addEventListener("keydown", (e) => {
  if(e.key === "Enter"){
    e.preventDefault();
    if(timerId) validateAndScore();
  }
});

btnRules.addEventListener("click", openRules);
btnCloseRules.addEventListener("click", closeRules);
btnOkRules.addEventListener("click", closeRules);
rulesModal.addEventListener("click", (e) => {
  if(e.target === rulesModal) closeRules();
});

// init
renderTimer();
updateChips(0);
setMessage("Presiona Empezar para generar letras.", "");
